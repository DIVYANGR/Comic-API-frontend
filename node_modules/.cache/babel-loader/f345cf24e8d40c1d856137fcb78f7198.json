{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yashrank/Desktop/DC_assignment/xkcd-comic/yashrank4-dc-assignment-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yashrank/Desktop/DC_assignment/xkcd-comic/yashrank4-dc-assignment-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yashrank/Desktop/DC_assignment/xkcd-comic/yashrank4-dc-assignment-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import conf from'./config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Comic(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useState=useState(-1),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setdata=_useState2[1];var getComicStrip=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var localLatest;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(id){axios.get(conf.baseURL+\"\".concat(id)).then(function(res){return setdata(res.data);}).catch(function(err){if(err.response.status>=400){navigate(\"/\");}});}else{localLatest=localStorage.getItem('latest');if(localLatest){navigate(\"/\".concat(localLatest));}else{axios.get(conf.baseURL).then(function(res){setdata(res.data);return res.data;}).then(function(res){return localStorage.setItem(\"latest\",res['num']);}).catch(function(err){if(err.response.status>=400){navigate(\"/\");}});}}case 1:case\"end\":return _context.stop();}}},_callee);}));return function getComicStrip(_x){return _ref.apply(this,arguments);};}();var getNextComicStrip=function getNextComicStrip(){if(data['num']){navigate(\"/\".concat(data['num']+1));}};var getPrevComicStrip=function getPrevComicStrip(){if(data['num']){navigate(\"/\".concat(data['num']-1));}};var parseTranscipt=function parseTranscipt(text){var nt=text===null||text===void 0?void 0:text.replaceAll(/\\\\n/g,\"\\<br\\>\");return nt;};var getRandomStrip=function getRandomStrip(){var localLatest=localStorage.getItem('latest');var randomId=Math.floor(Math.random()*localLatest||2000)+1;navigate(\"/\".concat(randomId));};useEffect(function(){getComicStrip(id);},[id]);return/*#__PURE__*/_jsxs(\"div\",{className:\"v-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h-container\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){return getPrevComicStrip();},children:\" prev \"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){return getRandomStrip();},children:\"random\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){return getNextComicStrip();},children:\" next\"})})]}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsx(\"p\",{children:data['safe_title']})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"boxinner\",children:[data['views'],\" \\uD83D\\uDC40 \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:data['img'],className:\"image\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"transcript \",children:/*#__PURE__*/_jsx(\"p\",{children:parseTranscipt(data['transcript'])})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","axios","conf","Comic","id","navigate","data","setdata","getComicStrip","get","baseURL","then","res","catch","err","response","status","localLatest","localStorage","getItem","setItem","getNextComicStrip","getPrevComicStrip","parseTranscipt","text","nt","replaceAll","getRandomStrip","randomId","Math","floor","random"],"sources":["/Users/yashrank/Desktop/DC_assignment/xkcd-comic/yashrank4-dc-assignment-frontend/src/Comic.js"],"sourcesContent":["import React from 'react'\nimport { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios'\n\nimport conf from './config'\n\nexport default function Comic() {\n\n  let { id } = useParams()\n  let navigate = useNavigate();\n\n  const [data, setdata] = useState(-1)\n\n  const getComicStrip = async (id) => {\n    if (id) {\n      axios.get(conf.baseURL + `${id}`)\n        .then(res => setdata(res.data))\n        .catch(err => {\n          if (err.response.status >= 400) {\n            navigate(\"/\")\n          }\n        })\n    }\n    else {\n      let localLatest = localStorage.getItem('latest')\n      if (localLatest) {\n        navigate(`/${localLatest}`)\n      }\n      else {\n        axios.get(conf.baseURL)\n          .then(res => {\n            setdata(res.data)\n            return res.data\n          })\n          .then(res => localStorage.setItem(\"latest\", res['num']))\n          .catch(err => {\n            if (err.response.status >= 400) {\n              navigate(\"/\")\n            }\n          })\n      }\n    }\n  }\n\n  const getNextComicStrip = () => {\n    if (data['num']) {\n      navigate(`/${data['num'] + 1}`);\n    }\n  }\n\n  const getPrevComicStrip = () => {\n    if (data['num']) {\n      navigate(`/${data['num'] - 1}`);\n    }\n  }\n\n  const parseTranscipt = (text) => {\n    let nt = text?.replaceAll(/\\\\n/g, \"\\<br\\>\")\n    return nt\n  }\n\n  const getRandomStrip = () => {\n    let localLatest = localStorage.getItem('latest')\n    let randomId = Math.floor(Math.random() * localLatest || 2000) + 1\n    navigate(`/${randomId}`);\n  }\n\n  useEffect(() => {\n    getComicStrip(id)\n\n  }, [id])\n\n\n  return (\n    <div className=\"v-container\">\n\n      <div className=\"h-container\">\n        <div>\n          <button className=\"btn\" onClick={() => getPrevComicStrip()}> prev </button>\n        </div>\n        <div>\n          <button className=\"btn\" onClick={() => getRandomStrip()}>random</button>\n        </div>\n        <div>\n          <button className=\"btn\" onClick={() => getNextComicStrip()}> next</button>\n        </div>\n      </div>\n\n\n      <main>\n\n        <div className=\"center\">\n          <div className=\"title\">\n            <p>{data['safe_title']}</p>\n          </div>\n          <div className=\"box\">\n            <div className=\"boxinner\">{data['views']} ðŸ‘€ </div>\n            <div className='img-container'>\n              <img src={data['img']} className=\"image\"></img>\n            </div>\n          </div>\n        </div>\n\n        <div className='transcript '>\n          <p>{parseTranscipt(data['transcript'])}</p>\n        </div>\n      </main>\n\n\n\n\n    </div >\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}